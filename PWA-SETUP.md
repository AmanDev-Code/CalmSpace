# Progressive Web App (PWA) Setup for CalmSpace

This guide explains how CalmSpace has been configured as a Progressive Web App (PWA), allowing users to install it on their mobile devices and access it offline.

## What is a PWA?

A Progressive Web App (PWA) is a type of web application that can be installed on users' devices like a native app. PWAs offer several benefits:

- **Installable**: Users can add the app to their home screen
- **Offline Access**: Basic functionality works without an internet connection
- **Fast Loading**: Cached resources load quickly
- **Native-like Experience**: Full-screen interface without browser UI
- **Push Notifications**: (Not implemented in this version)

## How PWA is Implemented in CalmSpace

### 1. Configuration Files

- **vite.config.ts**: Contains the Vite PWA plugin configuration with app metadata and icon information
- **src/sw.ts**: Service worker file that handles caching and offline functionality
- **public/pwa-icons/**: Directory containing app icons in different sizes
- **src/hooks/use-pwa-install.tsx**: Custom hook to manage PWA installation state
- **src/components/PWAInstallPrompt.tsx**: React components for showing installation prompts

### 2. User Experience

CalmSpace's PWA implementation provides:

- A non-intrusive install prompt in the mobile menu
- A persistent "Install App" option in the mobile sidebar
- Smart prompt behavior (only shown once, not shown if already installed)
- Offline access to already visited pages

### 3. Icon Generation

PWA icons were generated from the CalmSpace brand logo in sizes 192x192 and 512x512 pixels. These icons appear on the user's home screen when the app is installed.

## How to Test the PWA

1. **Build the application for production**:
   ```
   npm run build
   ```

2. **Serve the production build**:
   ```
   npm run preview
   ```

3. **Test on a mobile device or in Chrome DevTools**:
   - Open the site on a mobile device
   - The install prompt should appear in the mobile menu
   - You can also click "Install App" from the sidebar
   - After installation, the app should appear on the home screen

## Testing PWA Features in Chrome DevTools

1. Open Chrome DevTools (F12)
2. Go to Application > Manifest to check the app manifest
3. Go to Application > Service Workers to check service worker status
4. Use the Network tab with "Offline" selected to test offline functionality
5. Use the Application > Clear Storage option to reset PWA data for testing

## Implementation Details

### Web App Manifest

The manifest.json is automatically generated by the Vite PWA plugin based on the configuration in vite.config.ts. It includes:

- App name and description
- Theme colors
- Display mode (standalone)
- Icons in different sizes

### Service Worker

The service worker (sw.ts) is configured to:

- Cache app assets for offline use
- Update when new content is available
- Provide a smooth installation experience

### Installation Prompts

The app provides two ways for users to install the PWA:

1. **Automatic Prompt**: Shown at the top of the mobile menu when the app is eligible for installation
2. **Manual Option**: "Install App" button always available in the sidebar

## Best Practices Implemented

- **Non-intrusive prompts**: Install prompts don't interrupt the user experience
- **One-time prompts**: Installation prompts are only shown once
- **Clear benefits**: Explain why installing the app is beneficial
- **Optimized assets**: App is lightweight and loads quickly
- **Branded experience**: Consistent branding on home screen icon

## Future Enhancements

Future versions could include:

- Push notifications for appointment reminders
- Background sync for form submissions
- Improved offline content caching
- Custom installation analytics 